<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>安装 | urnotlynley的笔记</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/webBlog/logo.png">
    <meta name="description" content="urnotlynley的笔记">
    
    <link rel="preload" href="/webBlog/assets/css/0.styles.54b79104.css" as="style"><link rel="preload" href="/webBlog/assets/js/app.e7dfd760.js" as="script"><link rel="preload" href="/webBlog/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/webBlog/assets/js/9.4837a5ea.js" as="script"><link rel="prefetch" href="/webBlog/assets/js/10.c0da759f.js"><link rel="prefetch" href="/webBlog/assets/js/11.78b5a361.js"><link rel="prefetch" href="/webBlog/assets/js/12.feaed3b6.js"><link rel="prefetch" href="/webBlog/assets/js/13.ef5015ce.js"><link rel="prefetch" href="/webBlog/assets/js/14.1b2fb22e.js"><link rel="prefetch" href="/webBlog/assets/js/15.66d3e3eb.js"><link rel="prefetch" href="/webBlog/assets/js/3.df158bf2.js"><link rel="prefetch" href="/webBlog/assets/js/4.d12742be.js"><link rel="prefetch" href="/webBlog/assets/js/5.216cae74.js"><link rel="prefetch" href="/webBlog/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/webBlog/assets/js/7.9c9172a7.js"><link rel="prefetch" href="/webBlog/assets/js/8.b8974c76.js">
    <link rel="stylesheet" href="/webBlog/assets/css/0.styles.54b79104.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webBlog/" class="home-link router-link-active"><!----> <span class="site-name">urnotlynley的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/webBlog/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/webBlog/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>slidev</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webBlog/blog/slidev/" class="sidebar-link">layout布局</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>正则匹配</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Electron</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Nuxt</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webBlog/blog/Nuxt/" aria-current="page" class="active sidebar-link">安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#目录结构" class="sidebar-link">目录结构</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#个性meta标签" class="sidebar-link">个性meta标签</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#引入全局样式" class="sidebar-link">引入全局样式</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#自定义启动端口" class="sidebar-link">自定义启动端口</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#使用loader" class="sidebar-link">使用loader</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#动画" class="sidebar-link">动画</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#布局模板-3-0" class="sidebar-link">布局模板(3.0)</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#默认模板-2-0" class="sidebar-link">默认模板(2.0)</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#默认布局-2-0" class="sidebar-link">默认布局(2.0)</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#错误页面" class="sidebar-link">错误页面</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#多层级组件" class="sidebar-link">多层级组件</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#组件的懒加载" class="sidebar-link">组件的懒加载</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#模块化代码-composable文件夹的试用" class="sidebar-link">模块化代码 Composable文件夹的试用</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#数据请求" class="sidebar-link">数据请求</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#middleware路由中间件" class="sidebar-link">middleware路由中间件</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#静态资源文件" class="sidebar-link">静态资源文件</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#cookie设置" class="sidebar-link">Cookie设置</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/Nuxt/#状态共享" class="sidebar-link">状态共享</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>V3使用记录</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>3.0需要node版本在14.16以上</p> <p>2.0</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npx create<span class="token operator">-</span>nuxt<span class="token operator">-</span>app <span class="token operator">&lt;</span>项目名<span class="token operator">&gt;</span>
或者 yarn create nuxt<span class="token operator">-</span>app <span class="token operator">&lt;</span>项目名<span class="token operator">&gt;</span>
</code></pre></div><p>3.0</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npx nuxi init nuxt3<span class="token operator">-</span>app
</code></pre></div><h2 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h2> <p>默认的项目里就如下几个文件和目录，我已经用备注的形式写清楚每个文件的作用了。</p> <div class="language-JSON extra-class"><pre class="language-json"><code>- .nuxt               <span class="token comment">// 自动生成的目录，用于展示结果</span>
- node_modules        <span class="token comment">// 项目依赖包存放目录</span>
- .gitignore          <span class="token comment">// Git的配置目录，比如一些文件不用Git管理就可以在这个文件中配置</span>
- app.vue             <span class="token comment">// 项目入口文件，你可以在这里配置路由的出口</span>
- nuxt.config.ts      <span class="token comment">// nuxt项目的配置文件 ，这个里边可以配置Nuxt项目的方法面面</span>
- package-lock.json   <span class="token comment">// 锁定安装时包的版本，以保证其他人在 npm install时和你保持一致</span>
- package.json        <span class="token comment">// 包的配置文件和项目的启动调式命令配置</span>
- README.md           <span class="token comment">// 项目的说明文件</span>
- tsconfig.json       <span class="token comment">// TypeScript的配置文件</span>
 
</code></pre></div><p>随着我们的开发目录也会越来越多，比如常用的还有下面三个目录。</p> <div class="language-JSON extra-class"><pre class="language-json"><code>- pages               <span class="token comment">// 开发的页面目录</span>
- components          <span class="token comment">// 组件目录</span>
- assets              <span class="token comment">// 静态资源目录</span>
- layouts             <span class="token comment">// 项目布局目录</span>
</code></pre></div><p><strong>访问pages/index.vue</strong></p> <p>根目录app.vue，<NuxtWelcome></NuxtWelcome>替换为：<NuxtPage></NuxtPage></p> <p>一般vue文件页面顶层的 div 包裹是必需的，不然跳转会丢失状态</p> <h2 id="个性meta标签"><a href="#个性meta标签" class="header-anchor">#</a> 个性meta标签</h2> <h3 id="_2-0"><a href="#_2-0" class="header-anchor">#</a> 2.0</h3> <p>在想要设置个性标签的vue文件中,写一个head方法(类似data)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//独立设置head信息</span>
  <span class="token function">head</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">hid</span><span class="token operator">:</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;news&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&quot;this is news&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_3-0"><a href="#_3-0" class="header-anchor">#</a> 3.0</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Head</span><span class="token punctuation">&gt;</span></span>  //不确定需不需要head标签
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Title</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Title</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 或者使用useHead</span>
	<span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'snow-title-2'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'description'</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'snow-desc'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'keywords'</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'snow-kw'</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>    
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Title不会在页面中显示, 只会在浏览器的标题上显示   <strong>useHead优先级小于Title标签。</strong></p> <h2 id="引入全局样式"><a href="#引入全局样式" class="header-anchor">#</a> 引入全局样式</h2> <p>在nuxt.config.js文件中  引入全局css   (Global CSS: https://go.nuxtjs.dev/config-css)</p> <p><strong>css是一个数组</strong> 写入你要引入的文件</p> <div class="language- extra-class"><pre class="language-text"><code>css:['~static/css/index.css']
</code></pre></div><h2 id="自定义启动端口"><a href="#自定义启动端口" class="header-anchor">#</a> 自定义启动端口</h2> <p>在package.json中写</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string-property property">&quot;config&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
	<span class="token string-property property">&quot;nuxt&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string-property property">&quot;host&quot;</span><span class="token operator">:</span><span class="token string">&quot;ip&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;post&quot;</span><span class="token operator">:</span><span class="token string">&quot;1818&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="使用loader"><a href="#使用loader" class="header-anchor">#</a> 使用loader</h2> <p>在nuxt.config.js添加  (实例)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">loaders</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">limit</span><span class="token operator">:</span><span class="token number">10000</span><span class="token punctuation">,</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'img/[name].[hash].[ext]'</span>  <span class="token comment">// img文件夹下的原来的文件名+hash值.文件扩展名</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <p>使用nuxt-link代替a标签    绑定to对象, 使用name跳转, params传参</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>nuxt<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ name: 'index', params:{ newsId:3} }&quot;</span><span class="token operator">&gt;</span><span class="token constant">HOME</span><span class="token operator">&lt;</span><span class="token operator">/</span>nuxt<span class="token operator">-</span>link<span class="token operator">&gt;</span>
</code></pre></div><p>获取参数跟vue一样   </p> <h3 id="动态路由"><a href="#动态路由" class="header-anchor">#</a> 动态路由</h3> <p>在对应文件夹下建立 _[参数名].vue的文件   获取数据同样是</p> <p><strong>注意</strong>:</p> <p>从其他页面跳转到动态路由页面使用nuxt-link中的name要使用  [文件名]-[参数名]  跳转</p> <h4 id="在script里获取参数"><a href="#在script里获取参数" class="header-anchor">#</a> 在script里获取参数</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
</code></pre></div><h4 id="多参数的获取"><a href="#多参数的获取" class="header-anchor">#</a> 多参数的获取</h4> <p>目录结果如下:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">-</span><span class="token operator">|</span>  pages<span class="token operator">/</span>
<span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span> index<span class="token punctuation">.</span>vue
<span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span> goods<span class="token operator">-</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">/</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span> demo2<span class="token operator">-</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>vue
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">&lt;</span>NuxtLink to<span class="token operator">=</span><span class="token string">&quot;/goods-jspang/demo2-38&quot;</span><span class="token operator">&gt;</span>Demo2<span class="token punctuation">.</span>vue<span class="token operator">&lt;</span><span class="token operator">/</span>NuxtLink<span class="token operator">&gt;</span>
</code></pre></div><h3 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h3> <p><strong>目录和文件名同名</strong></p> <p>目录结构如下</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">|</span><span class="token operator">--</span>pages
<span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span>parent<span class="token operator">/</span>
<span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>child<span class="token punctuation">.</span>vue
<span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span>parent<span class="token punctuation">.</span>vue
</code></pre></div><p>在父组件中使用<code>NuxtChild</code></p> <h3 id="参数校验"><a href="#参数校验" class="header-anchor">#</a> 参数校验</h3> <p>在js中写</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>params<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="动画"><a href="#动画" class="header-anchor">#</a> 动画</h2> <p>自己新建一个css, 最好是在静态文件css中</p> <h3 id="全局动画"><a href="#全局动画" class="header-anchor">#</a> 全局动画</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span>page<span class="token operator">-</span>enter<span class="token operator">-</span>active<span class="token punctuation">,</span> <span class="token punctuation">.</span>page<span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token punctuation">{</span>
    <span class="token literal-property property">transition</span><span class="token operator">:</span> opacity 2s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>page<span class="token operator">-</span>enter<span class="token punctuation">,</span> <span class="token punctuation">.</span>page<span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token punctuation">{</span>
    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="单页面动画"><a href="#单页面动画" class="header-anchor">#</a> 单页面动画</h3> <p>同样在css文件重修改page</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span>test<span class="token operator">-</span>enter<span class="token operator">-</span>active<span class="token punctuation">,</span> <span class="token punctuation">.</span>test<span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token punctuation">{</span>
    <span class="token literal-property property">transition</span><span class="token operator">:</span> all 2s<span class="token punctuation">;</span>
    font<span class="token operator">-</span>size<span class="token operator">:</span>12px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>test<span class="token operator">-</span>enter<span class="token punctuation">,</span> <span class="token punctuation">.</span>test<span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token punctuation">{</span>
    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    font<span class="token operator">-</span>size<span class="token operator">:</span>40px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后在需要使用对应动画的vue中调用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">transition</span><span class="token operator">:</span><span class="token string">'test'</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="布局模板-3-0"><a href="#布局模板-3-0" class="header-anchor">#</a> 布局模板(3.0)</h2> <p>在<code>layouts</code> 中新建defaul.vue文件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    我是布局模板，default.vue
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>有了这个模板后，可以在任何你想要使用的页面中用<code>&lt;NuxtLayout&gt;</code>标签为页面赋予模板中的内容。</p> <p>某页面不想使用layout:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    layout<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    layout<span class="token operator">:</span> <span class="token string">'layout-snow'</span> <span class="token comment">//某页面使用特定的layout</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>动态设置layout</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">enableLayout</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    router<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>layout <span class="token operator">=</span> <span class="token string">&quot;layout-snow&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>全局设置，指定layout</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLayout</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layoutSnow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtPage</span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLayout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> layoutSnow <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;layout-snow&quot;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="默认模板-2-0"><a href="#默认模板-2-0" class="header-anchor">#</a> 默认模板(2.0)</h2> <p>新建一个app.html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
   {{ HEAD }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这里是所有页面都会加上的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    {{ APP }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里的读取的是nuxt.config.js里的信息， 就是我们写的pages文件夹下的主体页面了。需要注意的是HEAD和APP都需要 <strong>大写</strong> ，如果小写会报错的</p> <h2 id="默认布局-2-0"><a href="#默认布局-2-0" class="header-anchor">#</a> 默认布局(2.0)</h2> <p>默认布局主要针对于页面的统一布局使用。它在位置根目录下的layouts/default.vue。需要注意的是在默认布局里不要加入头部信息，只是关于 <code>&lt;template&gt;</code> 标签下的内容统一订制。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这里是所有页面都会加上的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt</span><span class="token punctuation">/&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里的 <code>&lt;nuxt/&gt;</code> 就相当于我们每个页面的内容，你也可以把一些通用样式放入这个默认布局里，但是个人不建议这样写，会增加页面的复杂程度。</p> <p>总结：要区分默认模版和默认布局的区别，模版可以订制很多头部信息，包括IE版本的判断；默认布局只能定制 <code>&lt;template&gt;</code>里的内容，跟布局有关系。在工作中修改时要看情况来编写代码。</p> <h2 id="错误页面"><a href="#错误页面" class="header-anchor">#</a> 错误页面</h2> <p>在<code>layouts</code>文件夹下新建一个error.vue  (<strong>默认</strong>)</p> <p>在script中接受error参数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">]</span>
</code></pre></div><p>然后在逻辑判断中判断error的状态码statusCode</p> <p>例如等于404就显示对应的文字提示</p> <h2 id="多层级组件"><a href="#多层级组件" class="header-anchor">#</a> 多层级组件</h2> <p>在<code>components</code>中建文件夹, 然后文件夹中再建.vue文件</p> <p>使用的时候就用外层文件夹的名称+里面组件的名字</p> <h2 id="组件的懒加载"><a href="#组件的懒加载" class="header-anchor">#</a> 组件的懒加载</h2> <p>如果在组件名前面加上<code>Lazy</code>前缀，则可以按需懒加载该组件。</p> <h2 id="模块化代码-composable文件夹的试用"><a href="#模块化代码-composable文件夹的试用" class="header-anchor">#</a> 模块化代码 Composable文件夹的试用</h2> <p>这个是业务逻辑代码的复用   <strong>只有顶层文件会被引入或者下面的test文件夹下面的ts叫<code>index.ts</code></strong></p> <p>新建一个文件夹<code>composables</code> 然后在文件夹里边，新建一个文件<code>time.ts</code></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span>  <span class="token keyword">const</span> <span class="token function-variable function">getTime</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> timezone <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> offset_GMT <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTimezoneOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> nowDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>nowDate <span class="token operator">+</span> offset_GMT <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">+</span> timezone <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> date <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> <span class="token function">twoDigits</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> <span class="token function">twoDigits</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token function">twoDigits</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> <span class="token function">twoDigits</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> <span class="token function">twoDigits</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> timeString <span class="token operator">=</span><span class="token string">'当前时间：'</span> <span class="token operator">+</span> date <span class="token operator">+</span> <span class="token string">'  '</span> <span class="token operator">+</span> time<span class="token punctuation">;</span>
  <span class="token keyword">return</span> timeString<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">twoDigits</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> val<span class="token punctuation">;</span>
  <span class="token keyword">return</span> val<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在页面中直接调用就可以了</p> <h2 id="数据请求"><a href="#数据请求" class="header-anchor">#</a> 数据请求</h2> <h3 id="asyncdata-2-0版本"><a href="#asyncdata-2-0版本" class="header-anchor">#</a> asyncData  (2.0版本)</h3> <p>是在组件创建之前执行的, 所以赋值不能使用this  跟data同级</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">asyncData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;https://www.fastmock.site/mock/5d0a1d606c32319ff252ec5e325699e5/buttontest/getJson&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">info</span><span class="token operator">:</span> data <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>使用async和await写法优雅一些</p> <h3 id="useasyncdata-3-0版本"><a href="#useasyncdata-3-0版本" class="header-anchor">#</a> useAsyncData (3.0版本)</h3> <p>Nuxt3中提供了四种方法：<code>useAsyncData</code> 、<code>useFetch</code> 、<code>useLazyFetch</code> 、<code>useLazyAsyncData</code> 。</p> <p>可以查看官网说明:  <a href="https://www.nuxtjs.org.cn/usage/data-fetching.html#%E5%9C%A8%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE" target="_blank" rel="noopener noreferrer">在服务端获取数据<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useAsyncData</span><span class="token punctuation">(</span><span class="token string">&quot;getList&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://121.36.81.61:8000/getTenArticleList&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>$fetch( )方法是nuxt3提供的内置方法，我们直接可以使用。</strong></p> <p>返回值是一个对象，对象里有四个属性。</p> <ul><li><p>data: 返回的数据，我们需要的服务器数据就在这个属性里。</p></li> <li><p>error：是否存在错误，如果存在错误，可以在这个属性中获得，返回的是一个对象。</p></li> <li><p>pending：这次请求的状态，返回的是布尔值。</p></li> <li><p>refresh：这个返回的是一个函数，可以用来刷新 handler函数返回的数据。</p></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://121.36.81.61:8000/getTenArticleList&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  method<span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>  id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>useFetch</code> 可以理解为所有的都选择默认配置的<code>useAsyncData</code> 方法</p> <h2 id="middleware路由中间件"><a href="#middleware路由中间件" class="header-anchor">#</a> middleware路由中间件</h2> <p>在项目根目录，新建一个<code>middleware</code>的文件夹，然后在文件下边新建一个文件<code>default.global.ts</code> 的文件。其中的<code>.global</code>代表这个中间件是全局的，也就是在每次跳转都会执行下面的代码。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtRouteMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">'/demo1'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'禁止访问这个页面'</span><span class="token punctuation">)</span>
     <span class="token function">abortNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//停止当前导航，可以使用error进行报错</span>
     <span class="token keyword">return</span>  <span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//通过useNuxtApp可以获取当前页的参数</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> $config <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useNuxtApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">//使用vue-router做路由守卫也行，很灵活</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> beforeEach<span class="token punctuation">,</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">'/product'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'/product/1'</span><span class="token punctuation">,</span><span class="token punctuation">{</span> replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">'/index'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">{</span> replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//auth.js内容</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtPlugin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token comment">//  可以使用addRouteMiddleware()辅助函数手动添加全局或命名路由中间件，例如在插件中。</span>
  <span class="token function">addRouteMiddleware</span><span class="token punctuation">(</span><span class="token string">'global-test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这个全局中间件被添加到一个插件中，将在每次路由更改时运行'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> global<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">addRouteMiddleware</span><span class="token punctuation">(</span><span class="token string">'named-test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这个命名的中间件被添加到一个插件中，将覆盖任何同名的现有中间件'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>如果不写global的话代表是只对注册页面起作用 ,  然后在需要使用的页面注册</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  middleware<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// or middleware: 'auth'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="静态资源文件"><a href="#静态资源文件" class="header-anchor">#</a> 静态资源文件</h2> <p>可以使用系统自带的 ~ 来找文件路径  这个表示从根目录开始查找</p> <p>css中同样适用</p> <h2 id="cookie设置"><a href="#cookie设置" class="header-anchor">#</a> Cookie设置</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> cookie <span class="token operator">=</span> <span class="token function">useCookie</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><p>options配置参数</p> <ol><li>maxAge/expires</li></ol> <p>这两个参数都是设置Cookie的有效时长的，如果两个参数你都不设置，那Cookie的值在关闭浏览器的时候将会被清空。两个参数的不同是，maxAge的值是一个数字<code>Number</code>,而expires的值是一个日期对象<code>Date object</code>.
比如我们希望设置Cookie的过气时间是一个小时，也就是3600秒，那我们的配置就需要这样写</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">useCookie</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  maxAge<span class="token operator">:</span><span class="token number">3600</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>httpOnly</li></ol> <p>这算是一个安全设置，如果把httpOnly设置为true，可以对最常见的XSS攻击起到防范作用。</p> <blockquote><p>什么是HttpOnly？ HttpOnly是包含在http返回头Set-Cookiew里面的一个附件的flag，所以它是后端服务器对cookie设置的一个附件属性，在生成cookie时使用HttpOnly标志有助于减轻客户端脚本访问收保护cookie的风险。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">useCookie</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token literal-property property">htttpOnly</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>secure</li></ol> <p>这也是一个安全设置，如果你的网址不是<code>HTTPS</code>的，并且把<code>secure</code>的值设置为true，那Cookie的值就不会传递给服务端。总的来说还是一个为了服务器安全的设置。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">useCookie</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token literal-property property">secure</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>其余的还有<code>domain</code> ,<code>path</code> ,<code>sameSite</code> ,<code>encode</code>,<code>decode</code> 这些属性设置，其实都跟安全有关，因为Cookie的设置确实需要考虑安全性，所以根据服务端和app的需求，尽量设置多的安全性参数。</p> <p>详细的见官网  <a href="https://www.nuxtjs.org.cn/usage/cookies.html#%E9%85%8D%E7%BD%AE%E9%A1%B9" target="_blank" rel="noopener noreferrer">配置项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="状态共享"><a href="#状态共享" class="header-anchor">#</a> 状态共享</h2> <p>使用<code>useState</code>可以定义简单的共享状态</p> <p>例如在 <code>composables</code> 中定义 <code>useCounter</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// composables/useCounter.ts</span>
<span class="token comment">// composables 下模块的同名导出将被自动按需引入</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useCounter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre></div><p><code>useState</code> 的第一参数为 <code>key</code>，第二参数为初始化的工厂函数</p> <p><strong><code>useState</code> 只允许在生命周期中使用。</strong></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webBlog/blog/Electron/" class="prev">
        介绍
      </a></span> <span class="next"><a href="/webBlog/blog/react/">
        react学习
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/webBlog/assets/js/app.e7dfd760.js" defer></script><script src="/webBlog/assets/js/2.733019b2.js" defer></script><script src="/webBlog/assets/js/9.4837a5ea.js" defer></script>
  </body>
</html>
