<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>V3使用心得 | urnotlynley的笔记</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/webBlog/logo.png">
    <meta name="description" content="urnotlynley的笔记">
    
    <link rel="preload" href="/webBlog/assets/css/0.styles.54b79104.css" as="style"><link rel="preload" href="/webBlog/assets/js/app.e7dfd760.js" as="script"><link rel="preload" href="/webBlog/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/webBlog/assets/js/15.66d3e3eb.js" as="script"><link rel="prefetch" href="/webBlog/assets/js/10.c0da759f.js"><link rel="prefetch" href="/webBlog/assets/js/11.78b5a361.js"><link rel="prefetch" href="/webBlog/assets/js/12.feaed3b6.js"><link rel="prefetch" href="/webBlog/assets/js/13.ef5015ce.js"><link rel="prefetch" href="/webBlog/assets/js/14.1b2fb22e.js"><link rel="prefetch" href="/webBlog/assets/js/3.df158bf2.js"><link rel="prefetch" href="/webBlog/assets/js/4.d12742be.js"><link rel="prefetch" href="/webBlog/assets/js/5.216cae74.js"><link rel="prefetch" href="/webBlog/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/webBlog/assets/js/7.9c9172a7.js"><link rel="prefetch" href="/webBlog/assets/js/8.b8974c76.js"><link rel="prefetch" href="/webBlog/assets/js/9.4837a5ea.js">
    <link rel="stylesheet" href="/webBlog/assets/css/0.styles.54b79104.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webBlog/" class="home-link router-link-active"><!----> <span class="site-name">urnotlynley的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/webBlog/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/webBlog/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>slidev</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webBlog/blog/slidev/" class="sidebar-link">layout布局</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>正则匹配</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Electron</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nuxt</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>V3使用记录</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webBlog/blog/v3true/" aria-current="page" class="active sidebar-link">V3使用心得</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#v3使用心得" class="sidebar-link">V3使用心得</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#element-plus" class="sidebar-link">element plus</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#props传值" class="sidebar-link">Props传值</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#判断是否使用了slot" class="sidebar-link">判断是否使用了slot</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#插件unplugin-auto-import" class="sidebar-link">插件unplugin-auto-import</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#object-freeze-arr-冻结数据" class="sidebar-link">object.freeze(arr)  冻结数据</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#jt-sx中插槽的调用" class="sidebar-link">[jt]sx中插槽的调用</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#useattrs-获取props中未获取的数据" class="sidebar-link">useAttrs  获取props中未获取的数据</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#作用域插槽" class="sidebar-link">作用域插槽</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#v3基础数据交互方式" class="sidebar-link">v3基础数据交互方式</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#手动分发defineexpose" class="sidebar-link">手动分发defineExpose</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#开发插件部分使用" class="sidebar-link">开发插件部分使用</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#axios" class="sidebar-link">axios</a></li><li class="sidebar-sub-header"><a href="/webBlog/blog/v3true/#pinia" class="sidebar-link">Pinia</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="v3使用心得"><a href="#v3使用心得" class="header-anchor">#</a> V3使用心得</h2> <h3 id="vscode插件"><a href="#vscode插件" class="header-anchor">#</a> vscode插件</h3> <p>vscode中使用插件Volar来验证变量是否被调用, 2.7以下版本继续使用vetur</p> <p>Vetur插件对template使用eslint-plugin-vue进行了检测,没有支持vue3的新特性，所以需要把这个检测关闭。</p> <p><strong>在vscode的设置-》扩展-》vetur-》Validtion：template取消选中即可。</strong></p> <p><img src="https://img-blog.csdnimg.cn/20210326103643540.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzMzk3Njk2,size_16,color_FFFFFF,t_70" alt="img"></p> <h3 id="报错解决"><a href="#报错解决" class="header-anchor">#</a> 报错解决</h3> <p>在开发中引入vue文件, 但是项目 报错找不到模块“../views/Home.vue”或其相应的类型声明</p> <p>在根目录新建env.d.ts文件</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 在文件中加上</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'*.vue'</span> <span class="token punctuation">{</span>
   <span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> DefineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
   <span class="token keyword">const</span> component<span class="token operator">:</span> DefineComponent<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span>
   <span class="token keyword">export</span> <span class="token keyword">default</span> component
<span class="token punctuation">}</span>
<span class="token comment">// 或者</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'*.vue'</span> <span class="token punctuation">{</span>
   <span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> DefineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
   <span class="token keyword">const</span> component<span class="token operator">:</span> ComponentOptions <span class="token operator">|</span> ComponentOptions<span class="token punctuation">[</span><span class="token string">'setup'</span><span class="token punctuation">]</span>
   <span class="token keyword">export</span> <span class="token keyword">default</span> component
<span class="token punctuation">}</span>
</code></pre></div><h3 id="快捷路径"><a href="#快捷路径" class="header-anchor">#</a> 快捷路径 (@)</h3> <p>首先在项目的 <code>vite.config.ts</code> 文件中，配置路径别名</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> path form <span class="token string">'path'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//配置文件扩展名</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'@'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">'assets'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/assets'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>有时候在 <code>vite.config.ts</code> 中配置了以后编辑器还会有红线提示, 还需要做下面的配置</p> <p>在 tsconfig.json 文件中同样需要添加路径配置</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  	<span class="token string-property property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
  	<span class="token string-property property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  	  <span class="token string-property property">&quot;@&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  	  <span class="token string-property property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  	  <span class="token string-property property">&quot;assets/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/assets/*&quot;</span><span class="token punctuation">]</span>
  	<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div><h3 id="获取dome"><a href="#获取dome" class="header-anchor">#</a> 获取dome</h3> <p>vue内置了getCurrentInstance方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 获取页面的实例对象</span>
<span class="token keyword">const</span> pageInstance <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取dom节点对象</span>
<span class="token keyword">const</span> tagDomObj <span class="token operator">=</span> pageInstance<span class="token punctuation">.</span>refs<span class="token punctuation">.</span>divDom<span class="token punctuation">;</span>
</code></pre></div><p>或者直接声明一个同ref名称一样的变量</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> myParagraph <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>  <span class="token comment">//(myParagraph跟ref绑定的同名)</span>
</code></pre></div><h2 id="element-plus"><a href="#element-plus" class="header-anchor">#</a> element plus</h2> <p>使用element plus的图标需要安装插件或者引入CDN</p> <p>而且使用时由于部分标签可能被占用, 所以最好是使用别名的形式给icon注册时候就用别名注册</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> component<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>ElementPlusIconsVue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">el-icon-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">changeToLine</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> component<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>changeToLine在单独的ts文件中声明</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">changeToLine</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(A-Z)g</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'-$1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="props传值"><a href="#props传值" class="header-anchor">#</a> Props传值</h2> <p>使用defineProps类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span>
	collapse<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//或者</span>
<span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	collapse<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span><span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>子组件传值</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> emits <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'update:collapse'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
然后在事件中调用
<span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">'update:collapse'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre></div><p>父组件传值的部分就要写成</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>v<span class="token operator">-</span>model<span class="token operator">:</span>collapse<span class="token operator">=</span><span class="token string">&quot;collapse&quot;</span>
</code></pre></div><h2 id="判断是否使用了slot"><a href="#判断是否使用了slot" class="header-anchor">#</a> 判断是否使用了slot</h2> <p>可以使用useSlots来判断是否使用了slots</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useSlots <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">let</span> slots <span class="token operator">=</span> <span class="token function">useSlots</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>如果有使用, 可以通过slots.default来判断是否有值</p> <p>自定义组件里面使用$slots.xxx(对应插槽的名称)来判断是否用户是自定义插槽, 否则显示默认插槽</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;editCell&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;$slots.editCell&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">-</span>check <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;check&quot;</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;clickCheck(scope)&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">-</span>close <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;close&quot;</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;clickClose(scope)&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre></div><h2 id="插件unplugin-auto-import"><a href="#插件unplugin-auto-import" class="header-anchor">#</a> 插件unplugin-auto-import</h2> <p>自动引入插件, 可以省去引入ref, watch等代码</p> <div class="language- extra-class"><pre class="language-text"><code>import AutoImport from 'unplugin-auto-import/vite'
//在vite.config.js的plugins中
AutoImport({
      imports: ['vue', 'vue-router'], // 自动导入vue和vue-router相关函数
      dts: 'src/auto-import.d.ts', // 生成 `auto-import.d.ts` 全局声明
    }),
</code></pre></div><h2 id="object-freeze-arr-冻结数据"><a href="#object-freeze-arr-冻结数据" class="header-anchor">#</a> object.freeze(arr)  冻结数据</h2> <p>若想让定义的对象或数组的数据也不能改变，可以使用object.freeze(arr)进行冻结。冻结指的是不能向这个对象或数组添加新的属性，不能修改已有属性的值，不能删除已有属性。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 不报错，但数据改变无效</span>
arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：0</span>
</code></pre></div><h2 id="jt-sx中插槽的调用"><a href="#jt-sx中插槽的调用" class="header-anchor">#</a> [jt]sx中插槽的调用</h2> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token punctuation">{</span><span class="token comment">/* jsx的写法 核心调用代码块*/</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> slots <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span><span class="token comment">/* 默认插槽 */</span><span class="token punctuation">}</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">'默认区域'</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token comment">/* 自定义插槽 */</span><span class="token punctuation">}</span>
      <span class="token string-property property">'top-section'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">'头部导航栏'</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">'aside-section'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">'侧边导航栏'</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">'main-section'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">'主体内容区'</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">'head-section'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">'头部内容区'</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">'opts-section'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">'中间内容区'</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">'data-section'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">'数据展示区'</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">'paging-section'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">'底部区'</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token punctuation">{</span><span class="token comment">/* 插槽布局组件调用 */</span><span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>content-layout</span> <span class="token attr-name">v-slots</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>slots<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></div><p>插槽都用&lt;&gt;&lt;/&gt;包裹一层</p> <h2 id="useattrs-获取props中未获取的数据"><a href="#useattrs-获取props中未获取的数据" class="header-anchor">#</a> useAttrs  获取props中未获取的数据</h2> <p>vue中提供了useAttrs方法</p> <div class="language- extra-class"><pre class="language-text"><code>let attrs = useAttrs()
// 在想要绑定的地方展开就可以了
{...attrs}就可以了
</code></pre></div><p>Css类型,在Vue中自带了, 可以自己引入</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> CSSProperties <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
</code></pre></div><h2 id="作用域插槽"><a href="#作用域插槽" class="header-anchor">#</a> 作用域插槽</h2> <p>在子组件声明好作用域插槽</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;action&quot;</span> <span class="token operator">:</span>form<span class="token operator">=</span><span class="token string">&quot;form&quot;</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;model&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
</code></pre></div><p>在父组件中使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template #action<span class="token operator">=</span><span class="token string">&quot;scope&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;submitForm(scope)&quot;</span><span class="token operator">&gt;</span>确认<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">&quot;resetForm(scope)&quot;</span><span class="token operator">&gt;</span>重置<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">Scope</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">form</span><span class="token operator">:</span> any
  <span class="token literal-property property">model</span><span class="token operator">:</span> any
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">submitForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">scope</span><span class="token operator">:</span> Scope</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'submitForm'</span><span class="token punctuation">,</span>scope<span class="token punctuation">)</span>
  scope<span class="token punctuation">.</span>form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">resetForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">scope</span><span class="token operator">:</span> Scope</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resetForm'</span><span class="token punctuation">)</span>
  scope<span class="token punctuation">.</span>form<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>声明好Scope的类型, 然后在自定时事件上可以调用</p> <h2 id="v3基础数据交互方式"><a href="#v3基础数据交互方式" class="header-anchor">#</a> v3基础数据交互方式</h2> <h3 id="watch事件"><a href="#watch事件" class="header-anchor">#</a> watch事件</h3> <p>watch事件中有两个参数, 第一个参数是监听的值, 第二个是监听的回调</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>visible<span class="token punctuation">,</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="props接收"><a href="#props接收" class="header-anchor">#</a> props接收</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="emits"><a href="#emits" class="header-anchor">#</a> emits</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> emits <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'update:visible'</span><span class="token punctuation">,</span> <span class="token string">'changeItem'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//在需要调用的地方调用就行了</span>
<span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">'update:visible'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
<span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">'changeItem'</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
</code></pre></div><h2 id="手动分发defineexpose"><a href="#手动分发defineexpose" class="header-anchor">#</a> 手动分发defineExpose</h2> <p>子组件是<code>&lt;script setup&gt;</code>时，父组件直接调用就会提示clear方法未定义。<a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineexpose" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>有这么一句话：<code>使用 &lt;script setup&gt; 的组件是默认关闭的，也即通过模板 ref 或者 $parent 链获取到的组件的公开实例，不会暴露任何在 &lt;script setup&gt; 中声明的绑定。</code>因此，父组件是不能直接访问子组件的方法。需要子组件手动的抛出才行。</p> <p>子组件中需要如此修改：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> defineExpose<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
    <span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> clear <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="开发插件部分使用"><a href="#开发插件部分使用" class="header-anchor">#</a> 开发插件部分使用</h2> <h3 id="_1、vite-plugin-vue-setup-extend"><a href="#_1、vite-plugin-vue-setup-extend" class="header-anchor">#</a> 1、vite-plugin-vue-setup-extend</h3> <p>解决vue3下 script setup语法糖 下 ，手动设置组件name不方便的问题</p> <div class="language-undefined extra-class"><pre class="language-text"><code>npm i vite-plugin-vue-setup-extend -D
</code></pre></div><p><em>在文件vite.config.ts中</em></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> setupExtend <span class="token keyword">from</span> <span class="token string">'vite-plugin-vue-setup-extend'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>
    <span class="token function">setupExtend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用:  使用name以后可以给组件自定义名称</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span> setup name<span class="token operator">=</span><span class="token string">&quot;demo&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="_2、unplugin-auto-import"><a href="#_2、unplugin-auto-import" class="header-anchor">#</a> 2、unplugin-auto-import</h3> <p>实现vue函数的自动导入,这样如ref, computed，watch等就不用手动导入了</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code> npm i unplugin<span class="token operator">-</span><span class="token keyword">auto</span><span class="token operator">-</span><span class="token keyword">import</span> <span class="token operator">-</span>D
</code></pre></div><p><em>在文件vite.config.ts中</em></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">imports</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'vue'</span><span class="token punctuation">,</span>
        <span class="token string">'vue-router'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">vuex</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'useStore'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dts</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>当前无效与eslint冲突，如果直接使用依然会报错</strong>
这里采用了全局eslint还需安装<em>npm i eslint-plugin-auto-import  -D</em>
顾最终配置如下
<em>在vite.config.ts文件中</em></p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> mode <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        include<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.[tj]sx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// .ts, .tsx, .js, .jsx</span>
          <span class="token operator">/</span>\<span class="token punctuation">.</span>vue$<span class="token operator">/</span><span class="token punctuation">,</span>
          <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue\?vue</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// .vue</span>
          <span class="token operator">/</span>\<span class="token punctuation">.</span>md$<span class="token operator">/</span> <span class="token comment">// .md</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        imports<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'vue'</span><span class="token punctuation">,</span>
          <span class="token string">'vue-router'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            vuex<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'useStore'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        resolvers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        dts<span class="token operator">:</span> <span class="token string">'./auto-imports.d.ts'</span><span class="token punctuation">,</span>
        <span class="token comment">// eslint报错解决</span>
        eslintrc<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// 此处为true运行后会生成.eslintrc-auto-import.json  auto-imports.d.ts文件</span>
          enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 此处第一次运行使用true,之后改为false</span>
          filepath<span class="token operator">:</span> <span class="token string">'./.eslintrc-auto-import.json'</span><span class="token punctuation">,</span> <span class="token comment">// Default `./.eslintrc-auto-import.json`</span>
          globalsPropValue<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// Default `true`, (true | false | 'readonly' | 'readable' | 'writable' | 'writeable')</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        resolvers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><em>在.eslintrc.js文件中</em></p> <div class="language-dart extra-class"><pre class="language-dart"><code>  <span class="token keyword">extends</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token string-literal"><span class="token string">'./.eslintrc-auto-import.json'</span></span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><em>在tsconfig.json文件中</em></p> <div class="language-bash extra-class"><pre class="language-bash"><code>  compilerOptions: <span class="token punctuation">[</span>
    <span class="token punctuation">..</span>.
    <span class="token string">&quot;types&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;element-plus/global&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>,
<span class="token string">&quot;include&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>., <span class="token string">&quot;auto-imports.d.ts&quot;</span><span class="token punctuation">]</span>,
</code></pre></div><h3 id="_3、unplugin-vue-components"><a href="#_3、unplugin-vue-components" class="header-anchor">#</a> 3、unplugin-vue-components</h3> <p>实现vue组件库的自动按需导入,这样就不用手动导入了</p> <div class="language-undefined extra-class"><pre class="language-text"><code>npm i unplugin-vue-components -D
</code></pre></div><p><em>在文件vite.config.ts中</em></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Components <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/vite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElementPlusResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/resolvers'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">imports</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'vue'</span><span class="token punctuation">,</span>
        <span class="token string">'vue-router'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">vuex</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'useStore'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dts</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4、vite-plugin-compression"><a href="#_4、vite-plugin-compression" class="header-anchor">#</a> 4、vite-plugin-compression</h3> <p>静态资源压缩</p> <div class="language-undefined extra-class"><pre class="language-text"><code>npm i vite-plugin-compression -D
</code></pre></div><p><em>在文件vite.config.ts中</em></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// 静态资源压缩</span>
<span class="token keyword">import</span> viteCompression <span class="token keyword">from</span> <span class="token string">'vite-plugin-compression'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>
    <span class="token function">viteCompression</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">verbose</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">disable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不禁用压缩</span>
      <span class="token literal-property property">deleteOriginFile</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 压缩后是否删除原文件</span>
      <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span> <span class="token comment">// 压缩前最小文件大小</span>
      <span class="token literal-property property">algorithm</span><span class="token operator">:</span> <span class="token string">'gzip'</span><span class="token punctuation">,</span> <span class="token comment">// 压缩算法</span>
      <span class="token literal-property property">ext</span><span class="token operator">:</span> <span class="token string">'.gz'</span> <span class="token comment">// 文件类型</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5、rollup-plugin-visualizer"><a href="#_5、rollup-plugin-visualizer" class="header-anchor">#</a> 5、rollup-plugin-visualizer</h3> <p>打包分析,可视化并分析构建包，查看哪些模块占用空间大小，以及模块的依赖关系</p> <div class="language-undefined extra-class"><pre class="language-text"><code>npm i rollup-plugin-visualizer -D
</code></pre></div><p><em>在文件vite.config.ts中</em></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> visualizer <span class="token keyword">from</span> <span class="token string">'rollup-plugin-visualizer'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>
    <span class="token function">visualizer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 打包后自动打开分析报告</span>
        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="axios"><a href="#axios" class="header-anchor">#</a> axios</h2> <p>v1.x.x 之后是没有 <code>common</code> 字段了，注意去 <a href="https://gitee.com/lyt-top/vue-next-admin/blob/master/package.json" target="_blank" rel="noopener noreferrer">package.json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中查看 <code>axios</code> 版本</p> <h2 id="pinia"><a href="#pinia" class="header-anchor">#</a> Pinia</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">// 你可以对 `defineStore()` 的返回值进行任意命名，但最好使用 store 的名字，同时以 `use` 开头且以 `Store` 结尾。(比如 `useUserStore`，`useCartStore`，`useProductStore`)</span>
<span class="token comment">// 第一个参数是你的应用中 Store 的唯一 ID。</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useAlertsStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'alerts'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 其他配置...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>将返回的函数命名为 <em>use...</em> 是一个符合组合式函数风格的约定。</p> <p><code>defineStore()</code> 的第二个参数可接受两类值：Setup 函数或 Option 对象。</p> <h3 id="option-store"><a href="#option-store" class="header-anchor">#</a> Option Store</h3> <p>与 Vue 的选项式 API 类似，我们也可以传入一个带有 <code>state</code>、<code>actions</code> 与 <code>getters</code> 属性的 Option 对象</p> <p>js</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> useCounterStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">double</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>你可以认为 <code>state</code> 是 store 的数据 (<code>data</code>)，<code>getters</code> 是 store 的计算属性 (<code>computed</code>)，而 <code>actions</code> 则是方法 (<code>methods</code>)。</p> <h3 id="setup-store"><a href="#setup-store" class="header-anchor">#</a> Setup Store</h3> <p>也存在另一种定义 store 的可用语法。与 Vue 组合式 API 的 <a href="https://cn.vuejs.org/api/composition-api-setup.html" target="_blank" rel="noopener noreferrer">setup 函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 相似，我们可以传入一个函数，该函数定义了一些响应式属性和方法，并且返回一个带有我们想暴露出去的属性和方法的对象。</p> <p>js</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> useCounterStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">.</span>value<span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> increment <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>在 <em>Setup Store</em> 中：</p> <ul><li><code>ref()</code> 就是 <code>state</code> 属性</li> <li><code>computed()</code> 就是 <code>getters</code></li> <li><code>function()</code> 就是 <code>actions</code></li></ul> <p>Setup store 比 <a href="https://pinia.vuejs.org/zh/core-concepts/#option-stores" target="_blank" rel="noopener noreferrer">Option Store<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 带来了更多的灵活性，因为你可以在一个 store 内创建侦听器，并自由地使用任何<a href="https://cn.vuejs.org/guide/reusability/composables.html#composables" target="_blank" rel="noopener noreferrer">组合式函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。<strong>不过，请记住，使用组合式函数会让 <a href="https://pinia.vuejs.org/zh/cookbook/composables.html" target="_blank" rel="noopener noreferrer">SSR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 变得更加复杂。</strong></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webBlog/blog/ts/" class="prev">
        : number   : string   是类型注解
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/webBlog/assets/js/app.e7dfd760.js" defer></script><script src="/webBlog/assets/js/2.733019b2.js" defer></script><script src="/webBlog/assets/js/15.66d3e3eb.js" defer></script>
  </body>
</html>
